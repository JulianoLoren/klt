{
  "uuid" : "1716f621-2440-41d6-8201-b6ff81e64996-00",
  "last_modified" : 1584415082194,
  "version" : "3.0.0.20500",
  "content" : "Create and distribute table, cmd: \nhive -e \"set mapred.job.name='Create Intermediate Flat Hive Table';\nUSE default;\n\nDROP TABLE IF EXISTS kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78;\nCREATE EXTERNAL TABLE IF NOT EXISTS kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78\n(\n\\`API_GET_RECOMMEND_BY_TOP_SALE_RETAILER_ID\\` bigint\n,\\`API_GET_RECOMMEND_BY_TOP_SALE_BARCODE\\` string\n,\\`API_GET_RECOMMEND_BY_TOP_SALE_NAME\\` string\n,\\`API_GET_RECOMMEND_BY_TOP_SALE_QUANTITY\\` decimal(18,5)\n,\\`API_GET_RECOMMEND_BY_TOP_SALE_REVENUE\\` decimal(18,5)\n)\nSTORED AS SEQUENCEFILE\nLOCATION 'hdfs://localhost:9000/kylin/kylin_metadata/kylin-1716f621-2440-41d6-8201-b6ff81e64996/kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78';\nALTER TABLE kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78 SET TBLPROPERTIES('auto.purge'='true');\nINSERT OVERWRITE TABLE \\`kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78\\` SELECT\n\\`API_GET_RECOMMEND_BY_TOP_SALE\\`.\\`RETAILER_ID\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE_RETAILER_ID\\`\n,\\`API_GET_RECOMMEND_BY_TOP_SALE\\`.\\`BARCODE\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE_BARCODE\\`\n,\\`API_GET_RECOMMEND_BY_TOP_SALE\\`.\\`NAME\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE_NAME\\`\n,\\`API_GET_RECOMMEND_BY_TOP_SALE\\`.\\`QUANTITY\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE_QUANTITY\\`\n,\\`API_GET_RECOMMEND_BY_TOP_SALE\\`.\\`REVENUE\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE_REVENUE\\`\n FROM \\`DEFAULT\\`.\\`API_GET_RECOMMEND_BY_TOP_SALE\\` as \\`API_GET_RECOMMEND_BY_TOP_SALE\\`\nWHERE 1=1;\n\n\" --hiveconf hive.merge.mapredfiles=false --hiveconf hive.auto.convert.join=true --hiveconf dfs.replication=2 --hiveconf hive.exec.compress.output=true --hiveconf hive.auto.convert.join.noconditionaltask=true --hiveconf mapreduce.job.split.metainfo.maxsize=-1 --hiveconf hive.merge.mapfiles=false --hiveconf hive.auto.convert.join.noconditionaltask.size=100000000 --hiveconf hive.stats.autogather=true\nls: cannot access /home/admin/spark-2.3.1-bin-hadoop2.6/lib/spark-assembly-*.jar: No such file or directory\n\nLogging initialized using configuration in jar:file:/home/admin/apache-hive-1.2.1-bin/lib/hive-common-1.2.1.jar!/hive-log4j.properties\nOK\nTime taken: 0.855 seconds\nOK\nTime taken: 0.052 seconds\nOK\nTime taken: 0.327 seconds\nOK\nTime taken: 0.12 seconds\nQuery ID = root_20200317031736_cb4d0897-0e5a-4207-ba30-9bffa7b991a0\nTotal jobs = 1\nExecution log at: /tmp/root/root_20200317031736_cb4d0897-0e5a-4207-ba30-9bffa7b991a0.log\n2020-03-17 03:17:40\tStarting to launch local task to process map join;\tmaximum memory = 477626368\n2020-03-17 03:17:41\tDump the side-table for tag: 0 with group count: 1 into file: file:/tmp/root/ef9670ef-0c40-4d13-b3d4-308e8d7fee95/hive_2020-03-17_03-17-36_813_7542046973095346476-1/-local-10003/HashTable-Stage-2/MapJoin-mapfile00--.hashtable\n2020-03-17 03:17:41\tUploaded 1 File to: file:/tmp/root/ef9670ef-0c40-4d13-b3d4-308e8d7fee95/hive_2020-03-17_03-17-36_813_7542046973095346476-1/-local-10003/HashTable-Stage-2/MapJoin-mapfile00--.hashtable (286 bytes)\n2020-03-17 03:17:41\tEnd of local task; Time Taken: 1.087 sec.\nExecution completed successfully\nMapredLocal task succeeded\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapreduce.job.reduces=<number>\nStarting Job = job_1584339967426_0235, Tracking URL = http://ip-172-31-15-241.ap-east-1.compute.internal:8088/proxy/application_1584339967426_0235/\nKill Command = /home/admin/hadoop-2.7.0/bin/hadoop job  -kill job_1584339967426_0235\nHadoop job information for Stage-2: number of mappers: 1; number of reducers: 1\n2020-03-17 03:17:48,718 Stage-2 map = 0%,  reduce = 0%\n2020-03-17 03:17:53,965 Stage-2 map = 100%,  reduce = 0%, Cumulative CPU 2.03 sec\n2020-03-17 03:17:59,172 Stage-2 map = 100%,  reduce = 100%, Cumulative CPU 4.01 sec\nMapReduce Total cumulative CPU time: 4 seconds 10 msec\nEnded Job = job_1584339967426_0235\nLoading data to table default.kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78\nTable default.kylin_intermediate_api_get_recommend_by_top_sale_33a4f97e_545d_caaa_61fb_5427187e0d78 stats: [numFiles=0, numRows=0, totalSize=0, rawDataSize=0]\nMapReduce Jobs Launched: \nStage-Stage-2: Map: 1  Reduce: 1   Cumulative CPU: 4.01 sec   HDFS Read: 14651 HDFS Write: 251 SUCCESS\nTotal MapReduce CPU Time Spent: 4 seconds 10 msec\nOK\nTime taken: 24.949 seconds\n",
  "status" : "SUCCEED",
  "info" : {
    "startTime" : "1584415049421",
    "yarn_application_tracking_url" : "http://ip-172-31-15-241.ap-east-1.compute.internal:8088/proxy/application_1584339967426_0235/",
    "hdfs_bytes_written" : "130",
    "endTime" : "1584415082193"
  }
}